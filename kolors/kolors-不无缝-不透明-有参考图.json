{"id":"00000000-0000-0000-0000-000000000000","revision":0,"last_node_id":55,"last_link_id":55,"nodes":[{"id":9,"type":"PreviewImage","pos":[1031.7886962890625,306],"size":[140,246],"flags":{},"order":14,"mode":0,"inputs":[{"label":"images","localized_name":"图像","name":"images","type":"IMAGE","link":26}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":20,"type":"EmptyLatentImage","pos":[1401.7886962890625,130],"size":[270,106],"flags":{},"order":16,"mode":0,"inputs":[{"label":"width","localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":28},{"label":"height","localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":29},{"label":"batch_size","localized_name":"批量大小","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"label":"LATENT","localized_name":"Latent","name":"LATENT","type":"LATENT","links":[44]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"EmptyLatentImage","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[512,512,1]},{"id":21,"type":"ImageGenResolutionFromImage","pos":[1031.7886962890625,130],"size":[258.5611267089844,46],"flags":{},"order":13,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":30}],"outputs":[{"label":"IMAGE_GEN_WIDTH (INT)","localized_name":"IMAGE_GEN_WIDTH (INT)","name":"IMAGE_GEN_WIDTH (INT)","type":"INT","links":[28]},{"label":"IMAGE_GEN_HEIGHT (INT)","localized_name":"IMAGE_GEN_HEIGHT (INT)","name":"IMAGE_GEN_HEIGHT (INT)","type":"INT","links":[29]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"59b027e088c1c8facf7258f6e392d16d204b4d27","Node name for S&R":"ImageGenResolutionFromImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":22,"type":"ConstrainImage|pysssss","pos":[531.7886962890625,130],"size":[270,154],"flags":{},"order":8,"mode":0,"inputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","link":31},{"label":"max_width","localized_name":"max_width","name":"max_width","type":"INT","widget":{"name":"max_width"},"link":null},{"label":"max_height","localized_name":"max_height","name":"max_height","type":"INT","widget":{"name":"max_height"},"link":null},{"label":"min_width","localized_name":"min_width","name":"min_width","type":"INT","widget":{"name":"min_width"},"link":null},{"label":"min_height","localized_name":"min_height","name":"min_height","type":"INT","widget":{"name":"min_height"},"link":null},{"label":"crop_if_required","localized_name":"crop_if_required","name":"crop_if_required","type":"COMBO","widget":{"name":"crop_if_required"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","shape":6,"type":"IMAGE","links":[30]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"ConstrainImage|pysssss","widget_ue_connectable":{}},"widgets_values":[1280,1280,0,0,"no"]},{"id":35,"type":"MZ_ChatGLM3_Advance_V2","pos":[531.7886962890625,1246],"size":[400,237],"flags":{},"order":11,"mode":0,"inputs":[{"label":"chatglm3_model","localized_name":"chatglm3_model","name":"chatglm3_model","type":"CHATGLM3MODEL","link":32},{"label":"text","localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"label":"width","localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"label":"height","localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"label":"crop_w","localized_name":"crop_w","name":"crop_w","type":"INT","widget":{"name":"crop_w"},"link":null},{"label":"crop_h","localized_name":"crop_h","name":"crop_h","type":"INT","widget":{"name":"crop_h"},"link":null},{"label":"target_width","localized_name":"target_width","name":"target_width","type":"INT","widget":{"name":"target_width"},"link":null},{"label":"target_height","localized_name":"target_height","name":"target_height","type":"INT","widget":{"name":"target_height"},"link":null}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","links":[35]}],"properties":{"cnr_id":"comfyui-kolors-mz","ver":"2.0.0","Node name for S&R":"MZ_ChatGLM3_Advance_V2","widget_ue_connectable":{}},"widgets_values":["ARG_POSITIVE_PROMPT_STRING",1024,1024,0,0,1024,1024,[false,true]]},{"id":36,"type":"MZ_ChatGLM3_V2","pos":[531.7886962890625,1608],"size":[400,200],"flags":{},"order":12,"mode":0,"inputs":[{"label":"chatglm3_model","localized_name":"chatglm3_model","name":"chatglm3_model","type":"CHATGLM3MODEL","link":33},{"label":"text","localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","links":[36]}],"properties":{"cnr_id":"comfyui-kolors-mz","ver":"2.0.0","Node name for S&R":"MZ_ChatGLM3_V2","widget_ue_connectable":{}},"widgets_values":["ARG_NEGATIVE_PROMPT_STRING",[false,true]]},{"id":40,"type":"AIO_Preprocessor","pos":[531.7886962890625,414],"size":[270,82],"flags":{},"order":9,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":34},{"label":"preprocessor","localized_name":"preprocessor","name":"preprocessor","shape":7,"type":"COMBO","widget":{"name":"preprocessor"},"link":null},{"label":"resolution","localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[26,38]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"59b027e088c1c8facf7258f6e392d16d204b4d27","Node name for S&R":"AIO_Preprocessor","widget_ue_connectable":{}},"widgets_values":["CannyEdgePreprocessor",768]},{"id":43,"type":"KSampler","pos":[1771.7886962890625,130],"size":[270,474],"flags":{},"order":17,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":53},{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":42},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":43},{"label":"latent_image","localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":44},{"label":"seed","localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"label":"steps","localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"label":"cfg","localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"label":"sampler_name","localized_name":"采样器名称","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"label":"scheduler","localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"label":"denoise","localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"label":"LATENT","localized_name":"Latent","name":"LATENT","type":"LATENT","links":[39]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"KSampler","widget_ue_connectable":{}},"widgets_values":[762150226832043,"randomize",25,4.5,"dpmpp_2m","karras",1]},{"id":54,"type":"MZ_IPAdapterAdvancedKolors","pos":[531.7886962890625,838],"size":[327.6460876464844,278],"flags":{},"order":10,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"MODEL","link":47},{"label":"ipadapter","localized_name":"ipadapter","name":"ipadapter","type":"IPADAPTER","link":48},{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":49},{"label":"image_negative","localized_name":"image_negative","name":"image_negative","shape":7,"type":"IMAGE","link":null},{"label":"attn_mask","localized_name":"attn_mask","name":"attn_mask","shape":7,"type":"MASK","link":null},{"label":"clip_vision","localized_name":"clip_vision","name":"clip_vision","shape":7,"type":"CLIP_VISION","link":50},{"label":"weight","localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"label":"weight_type","localized_name":"weight_type","name":"weight_type","type":"COMBO","widget":{"name":"weight_type"},"link":null},{"label":"combine_embeds","localized_name":"combine_embeds","name":"combine_embeds","type":"COMBO","widget":{"name":"combine_embeds"},"link":null},{"label":"start_at","localized_name":"start_at","name":"start_at","type":"FLOAT","widget":{"name":"start_at"},"link":null},{"label":"end_at","localized_name":"end_at","name":"end_at","type":"FLOAT","widget":{"name":"end_at"},"link":null},{"label":"embeds_scaling","localized_name":"embeds_scaling","name":"embeds_scaling","type":"COMBO","widget":{"name":"embeds_scaling"},"link":null}],"outputs":[{"label":"MODEL","localized_name":"模型","name":"MODEL","type":"MODEL","links":[53]}],"properties":{"cnr_id":"comfyui-kolors-mz","ver":"2.0.0","Node name for S&R":"MZ_IPAdapterAdvancedKolors","widget_ue_connectable":{}},"widgets_values":[0.6000000000000001,"linear","concat",0,1,"K+V"]},{"id":42,"type":"VAEDecode","pos":[2141.78857421875,130],"size":[140,46],"flags":{},"order":18,"mode":0,"inputs":[{"label":"samples","localized_name":"Latent","name":"samples","type":"LATENT","link":39},{"label":"vae","localized_name":"vae","name":"vae","type":"VAE","link":54}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[55]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":19,"type":"LoadImage","pos":[100,121.90505981445312],"size":[274.080078125,314],"flags":{},"order":0,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[31,34]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["pasted/image (163).png","image"]},{"id":32,"type":"LoadImage","pos":[-247.68426513671875,781.619384765625],"size":[274.080078125,314],"flags":{},"order":1,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[49]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["pasted/image (164).png","image"]},{"id":45,"type":"VAELoader","pos":[100,594],"size":[270,58],"flags":{},"order":2,"mode":0,"inputs":[{"label":"vae_name","localized_name":"vae名称","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"label":"VAE","localized_name":"VAE","name":"VAE","type":"VAE","links":[54]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"VAELoader","widget_ue_connectable":{}},"widgets_values":["sdxl_vae.safetensors"]},{"id":46,"type":"IPAdapterModelLoader","pos":[100,782],"size":[270,58],"flags":{},"order":3,"mode":0,"inputs":[{"label":"ipadapter_file","localized_name":"ipadapter_file","name":"ipadapter_file","type":"COMBO","widget":{"name":"ipadapter_file"},"link":null}],"outputs":[{"label":"IPADAPTER","localized_name":"IPADAPTER","name":"IPADAPTER","type":"IPADAPTER","links":[48]}],"properties":{"cnr_id":"comfyui_ipadapter_plus","ver":"2.0.0","Node name for S&R":"IPAdapterModelLoader","widget_ue_connectable":{}},"widgets_values":["Kolors-IP-Adapter-Plus.bin"]},{"id":47,"type":"CLIPVisionLoader","pos":[100,970],"size":[270,58],"flags":{},"order":4,"mode":0,"inputs":[{"label":"clip_name","localized_name":"clip名称","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"label":"CLIP_VISION","localized_name":"CLIP视觉","name":"CLIP_VISION","type":"CLIP_VISION","links":[50]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{}},"widgets_values":["kolors-clip_vision.bin"]},{"id":49,"type":"MZ_KolorsUNETLoaderV2","pos":[100,1158],"size":[320.1060485839844,58],"flags":{},"order":5,"mode":0,"inputs":[{"label":"unet_name","localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"label":"model","localized_name":"model","name":"model","type":"MODEL","links":[47]}],"properties":{"cnr_id":"comfyui-kolors-mz","ver":"2.0.0","Node name for S&R":"MZ_KolorsUNETLoaderV2","widget_ue_connectable":{}},"widgets_values":["kolors.safetensors"]},{"id":50,"type":"MZ_ChatGLM3Loader","pos":[100,1346],"size":[292.8853454589844,58],"flags":{},"order":6,"mode":0,"inputs":[{"label":"chatglm3_checkpoint","localized_name":"chatglm3_checkpoint","name":"chatglm3_checkpoint","type":"COMBO","widget":{"name":"chatglm3_checkpoint"},"link":null}],"outputs":[{"label":"chatglm3_model","localized_name":"chatglm3_model","name":"chatglm3_model","type":"CHATGLM3MODEL","links":[32,33]}],"properties":{"cnr_id":"comfyui-kolors-mz","ver":"2.0.0","Node name for S&R":"MZ_ChatGLM3Loader","widget_ue_connectable":{}},"widgets_values":["chatglm3-8bit.safetensors"]},{"id":51,"type":"MZ_KolorsControlNetLoader","pos":[100,1534],"size":[331.7886657714844,58],"flags":{},"order":7,"mode":0,"inputs":[{"label":"control_net_name","localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"label":"ControlNet","localized_name":"ControlNet","name":"ControlNet","type":"CONTROL_NET","links":[37]}],"properties":{"cnr_id":"comfyui-kolors-mz","ver":"2.0.0","Node name for S&R":"MZ_KolorsControlNetLoader","widget_ue_connectable":{}},"widgets_values":["kolors-canny.safetensors"]},{"id":41,"type":"ControlNetApplyAdvanced","pos":[1031.7886962890625,674],"size":[270,186],"flags":{},"order":15,"mode":0,"inputs":[{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":35},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":36},{"label":"control_net","localized_name":"ControlNet","name":"control_net","type":"CONTROL_NET","link":37},{"label":"image","localized_name":"图像","name":"image","type":"IMAGE","link":38},{"label":"vae","localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"label":"strength","localized_name":"强度","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"label":"start_percent","localized_name":"开始百分比","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"label":"end_percent","localized_name":"结束百分比","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","links":[42]},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","links":[43]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"ControlNetApplyAdvanced","widget_ue_connectable":{}},"widgets_values":[0.7000000000000002,0,0.9000000000000002]},{"id":15,"type":"SaveImage","pos":[1400.5958251953125,742.5321655273438],"size":[613.9352416992188,868.82568359375],"flags":{},"order":19,"mode":0,"inputs":[{"label":"images","localized_name":"图片","name":"images","type":"IMAGE","link":55},{"label":"filename_prefix","localized_name":"文件名前缀","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.46","Node name for S&R":"SaveImage","widget_ue_connectable":{}},"widgets_values":["i"]}],"links":[[26,40,0,9,0,"IMAGE"],[28,21,0,20,0,"INT"],[29,21,1,20,1,"INT"],[30,22,0,21,0,"IMAGE"],[31,19,0,22,0,"IMAGE"],[32,50,0,35,0,"CHATGLM3MODEL"],[33,50,0,36,0,"CHATGLM3MODEL"],[34,19,0,40,0,"IMAGE"],[35,35,0,41,0,"CONDITIONING"],[36,36,0,41,1,"CONDITIONING"],[37,51,0,41,2,"CONTROL_NET"],[38,40,0,41,3,"IMAGE"],[39,43,0,42,0,"LATENT"],[42,41,0,43,1,"CONDITIONING"],[43,41,1,43,2,"CONDITIONING"],[44,20,0,43,3,"LATENT"],[47,49,0,54,0,"MODEL"],[48,46,0,54,1,"IPADAPTER"],[49,32,0,54,2,"IMAGE"],[50,47,0,54,5,"CLIP_VISION"],[53,54,0,43,0,"MODEL"],[54,45,0,42,1,"VAE"],[55,42,0,15,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.4950000000000008,"offset":[1069.4681662979704,-173.85279976316465]},"frontendVersion":"1.23.4","ue_links":[],"workspace_info":{"id":"iAFDoeNNF2L-jPTEuGNsT","saveLock":false,"cloudID":null,"coverMediaPath":null},"links_added_by_ue":[]},"version":0.4}