{"id":"03e1969a-4c36-4eae-a1b8-c66ec0b1adc9","revision":0,"last_node_id":18,"last_link_id":21,"nodes":[{"id":10,"type":"GetImageSize+","pos":[1367.6033935546875,894.1012573242188],"size":[159.50155639648438,66],"flags":{},"order":4,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":10}],"outputs":[{"label":"width","localized_name":"width","name":"width","type":"INT","links":[16]},{"label":"height","localized_name":"height","name":"height","type":"INT","links":[17]},{"label":"count","localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"},"widgets_values":[]},{"id":14,"type":"ImageResizeKJv2","pos":[887.5025024414062,748.9334106445312],"size":[270,336],"flags":{},"order":3,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":18},{"label":"mask","localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"label":"width","localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"label":"height","localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"label":"upscale_method","localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"label":"keep_proportion","localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"label":"pad_color","localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"label":"crop_position","localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"label":"divisible_by","localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"label":"device","localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[10,20]},{"label":"width","localized_name":"width","name":"width","type":"INT","links":null},{"label":"height","localized_name":"height","name":"height","type":"INT","links":null},{"label":"mask","localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"22e722bafec15ffc9f4d6e9b89f352cfd0b2a402","widget_ue_connectable":{},"Node name for S&R":"ImageResizeKJv2"},"widgets_values":[1560,1560,"bilinear","resize","0, 0, 0","center",2,"gpu"]},{"id":15,"type":"DownloadAndLoadSAM2Model","pos":[920.92138671875,500.0870361328125],"size":[265.9524841308594,133.03561401367188],"flags":{},"order":0,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"label":"segmentor","localized_name":"segmentor","name":"segmentor","type":"COMBO","widget":{"name":"segmentor"},"link":null},{"label":"device","localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"label":"precision","localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"label":"sam2_model","localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","links":[19]}],"properties":{"cnr_id":"ComfyUI-segment-anything-2","ver":"c59676b008a76237002926f684d0ca3a9b29ac54","widget_ue_connectable":{},"Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2.1_hiera_base_plus.safetensors","automaskgenerator","cuda","fp16"]},{"id":16,"type":"Dogami_Sam2AutoSegmentation","pos":[1249.65087890625,344.79034423828125],"size":[339.447265625,430],"flags":{},"order":5,"mode":0,"inputs":[{"label":"sam2_model","localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","link":19},{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":20},{"label":"points_per_side","localized_name":"points_per_side","name":"points_per_side","type":"INT","widget":{"name":"points_per_side"},"link":null},{"label":"points_per_batch","localized_name":"points_per_batch","name":"points_per_batch","type":"INT","widget":{"name":"points_per_batch"},"link":null},{"label":"pred_iou_thresh","localized_name":"pred_iou_thresh","name":"pred_iou_thresh","type":"FLOAT","widget":{"name":"pred_iou_thresh"},"link":null},{"label":"stability_score_thresh","localized_name":"stability_score_thresh","name":"stability_score_thresh","type":"FLOAT","widget":{"name":"stability_score_thresh"},"link":null},{"label":"stability_score_offset","localized_name":"stability_score_offset","name":"stability_score_offset","type":"FLOAT","widget":{"name":"stability_score_offset"},"link":null},{"label":"mask_threshold","localized_name":"mask_threshold","name":"mask_threshold","type":"FLOAT","widget":{"name":"mask_threshold"},"link":null},{"label":"crop_n_layers","localized_name":"crop_n_layers","name":"crop_n_layers","type":"INT","widget":{"name":"crop_n_layers"},"link":null},{"label":"box_nms_thresh","localized_name":"box_nms_thresh","name":"box_nms_thresh","type":"FLOAT","widget":{"name":"box_nms_thresh"},"link":null},{"label":"crop_nms_thresh","localized_name":"crop_nms_thresh","name":"crop_nms_thresh","type":"FLOAT","widget":{"name":"crop_nms_thresh"},"link":null},{"label":"crop_overlap_ratio","localized_name":"crop_overlap_ratio","name":"crop_overlap_ratio","type":"FLOAT","widget":{"name":"crop_overlap_ratio"},"link":null},{"label":"crop_n_points_downscale_factor","localized_name":"crop_n_points_downscale_factor","name":"crop_n_points_downscale_factor","type":"INT","widget":{"name":"crop_n_points_downscale_factor"},"link":null},{"label":"min_mask_region_area","localized_name":"min_mask_region_area","name":"min_mask_region_area","type":"FLOAT","widget":{"name":"min_mask_region_area"},"link":null},{"label":"use_m2m","localized_name":"use_m2m","name":"use_m2m","type":"BOOLEAN","widget":{"name":"use_m2m"},"link":null},{"label":"keep_model_loaded","localized_name":"keep_model_loaded","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null}],"outputs":[{"label":"mask","localized_name":"mask","name":"mask","type":"MASK","links":null},{"label":"segmented_image","localized_name":"segmented_image","name":"segmented_image","type":"IMAGE","links":[]},{"label":"bbox","localized_name":"bbox","name":"bbox","type":"BBOX","links":null},{"label":"mask_list","localized_name":"mask_list","name":"mask_list","type":"MASK_LIST","links":[13]}],"properties":{"aux_id":"dogami567/dogami_nodes","ver":"47e33b3d822c335da9525625d12546d5dd4bc55e","widget_ue_connectable":{},"Node name for S&R":"Dogami_Sam2AutoSegmentation"},"widgets_values":[160,256,0.45000000000000007,0.8600000000000002,1,0.5000000000000001,0,0.37000000000000005,0.7,0.4000000000000001,5,0.030000000000000006,false,true],"color":"#223","bgcolor":"#335"},{"id":17,"type":"LoadImage","pos":[372.0600891113281,1129.5274658203125],"size":[479.7655029296875,718.0120849609375],"flags":{},"order":1,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[11,18]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","widget_ue_connectable":{},"Node name for S&R":"LoadImage"},"widgets_values":["1344b1ef910b9859c3950e8b41d2dbd2.jpg","image"]},{"id":13,"type":"Dogami_MaskListToContours","pos":[1694.3897705078125,685.7305297851562],"size":[294.4165954589844,318],"flags":{},"order":6,"mode":0,"inputs":[{"label":"mask_list","localized_name":"mask_list","name":"mask_list","type":"MASK_LIST","link":13},{"label":"original_width","localized_name":"original_width","name":"original_width","type":"INT","widget":{"name":"original_width"},"link":14},{"label":"original_height","localized_name":"original_height","name":"original_height","type":"INT","widget":{"name":"original_height"},"link":15},{"label":"current_width","localized_name":"current_width","name":"current_width","type":"INT","widget":{"name":"current_width"},"link":16},{"label":"current_height","localized_name":"current_height","name":"current_height","type":"INT","widget":{"name":"current_height"},"link":17},{"label":"min_area","localized_name":"min_area","name":"min_area","type":"INT","widget":{"name":"min_area"},"link":null},{"label":"max_area_ratio","localized_name":"max_area_ratio","name":"max_area_ratio","type":"FLOAT","widget":{"name":"max_area_ratio"},"link":null},{"label":"epsilon_multiplier","localized_name":"epsilon_multiplier","name":"epsilon_multiplier","type":"FLOAT","widget":{"name":"epsilon_multiplier"},"link":null},{"label":"preserve_detail","localized_name":"preserve_detail","name":"preserve_detail","type":"COMBO","widget":{"name":"preserve_detail"},"link":null},{"label":"enable_curve_fitting","localized_name":"enable_curve_fitting","name":"enable_curve_fitting","type":"BOOLEAN","widget":{"name":"enable_curve_fitting"},"link":null},{"label":"curve_smoothing","localized_name":"curve_smoothing","name":"curve_smoothing","type":"FLOAT","widget":{"name":"curve_smoothing"},"link":null},{"label":"curve_density","localized_name":"curve_density","name":"curve_density","type":"FLOAT","widget":{"name":"curve_density"},"link":null}],"outputs":[{"label":"vector_masks_json","localized_name":"vector_masks_json","name":"vector_masks_json","type":"STRING","links":[21]},{"label":"mask_count","localized_name":"mask_count","name":"mask_count","type":"INT","links":[]}],"properties":{"aux_id":"dogami567/dogami_nodes","ver":"47e33b3d822c335da9525625d12546d5dd4bc55e","widget_ue_connectable":{},"Node name for S&R":"Dogami_MaskListToContours"},"widgets_values":[10,0.005,1024,1024,8,1,0.003000000000000001,"最高精度 (Ultra)",false,0.05,3]},{"id":18,"type":"SaveJSON","pos":[2129.4091796875,720.3851318359375],"size":[400,200],"flags":{},"order":7,"mode":0,"inputs":[{"label":"json_data","localized_name":"json_data","name":"json_data","type":"STRING","widget":{"name":"json_data"},"link":21},{"label":"filename_prefix","localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"label":"compact_format","localized_name":"compact_format","name":"compact_format","type":"BOOLEAN","widget":{"name":"compact_format"},"link":null}],"outputs":[],"properties":{"aux_id":"dogami567/dogami_nodes","ver":"9d7dd68cc7493ccbfba4eb0478a5510eff5ae5d7","widget_ue_connectable":{}},"widgets_values":["{}","output",[false,true],[false,true]]},{"id":11,"type":"GetImageSize+","pos":[1348.9764404296875,1031.4019775390625],"size":[159.50155639648438,66],"flags":{},"order":2,"mode":0,"inputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","link":11}],"outputs":[{"label":"width","localized_name":"width","name":"width","type":"INT","links":[14]},{"label":"height","localized_name":"height","name":"height","type":"INT","links":[15]},{"label":"count","localized_name":"count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","widget_ue_connectable":{},"Node name for S&R":"GetImageSize+"},"widgets_values":[]}],"links":[[10,14,0,10,0,"IMAGE"],[11,17,0,11,0,"IMAGE"],[13,16,3,13,0,"MASK_LIST"],[14,11,0,13,1,"INT"],[15,11,1,13,2,"INT"],[16,10,0,13,3,"INT"],[17,10,1,13,4,"INT"],[18,17,0,14,0,"IMAGE"],[19,15,0,16,0,"SAM2MODEL"],[20,14,0,16,1,"IMAGE"],[21,13,0,18,0,"STRING"]],"groups":[],"config":{},"extra":{"workspace_info":{"id":"8hQ72D0NODgr6zH4OBhff","saveLock":false,"cloudID":null,"coverMediaPath":null},"ue_links":[],"ds":{"scale":0.7247295000000004,"offset":[121.62423798665822,-371.5929220983059]}},"version":0.4}